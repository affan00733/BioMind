# BioMind Voice Lab Environment Variables
# Production configuration

# Google Cloud Configuration
GCP_PROJECT_ID=trusty-frame-474816-m0
GOOGLE_CLOUD_PROJECT=trusty-frame-474816-m0
# Explicit LOCATION used by the app (do not rely only on GCP_LOCATION)
LOCATION=us-central1
GCP_LOCATION=us-central1

# RAG Pipeline Settings
RAG_INDEX_NAME=biomind-search-index
RAG_MAX_CONTEXT_LENGTH=4000
RAG_MIN_SCORE_THRESHOLD=0.5
RAG_TEMPERATURE=0.3

# Vertex AI Models
EMBEDDING_MODEL=text-embedding-005
GENERATION_MODEL=gemini-2.5-flash-lite

# Connector Settings
ENABLE_PUBMED=true
ENABLE_UNIPROT=true
ENABLE_DRUGBANK=false
ENABLE_GOOGLE_HEALTH_BLOG=false

# Vector Search (formerly Matching Engine)
MATCHING_ENGINE_ENABLED=true
MATCHING_ENGINE_INDEX_ENDPOINT=projects/95557543251/locations/us-central1/indexEndpoints/1767612276208041984
MATCHING_ENGINE_DEPLOYED_INDEX_ID=biomind_deployed_index_2
# Full index resource name (required for ingestion/upserts). For Batch indexes, upserts are not supported.
# Example: projects/95557543251/locations/us-central1/indexes/6370326279752777728
MATCHING_ENGINE_INDEX_NAME=
MATCHING_ENGINE_NUM_NEIGHBORS=10

# API Authentication
PUBMED_EMAIL=affanmohhd@gmail.com
DRUGBANK_API_KEY=your-drugbank-api-key

# Cache Settings
CACHE_TTL_SECONDS=300  # 5 minutes

# UI state persistence
# When false, the Streamlit app will NOT write data/ui_state.json
UI_PERSIST_STATE=false

# Enforce remote corpus (no local fallback); if true and CORPUS_URI is empty, loader will raise
STRICT_REMOTE_CORPUS=true

# Optional remote corpus location for mapping vector IDs to text (e.g., GCS)
# Set to a public or ADC-accessible path like: gs://YOUR_BUCKET/path/corpus.jsonl
# Remote corpus only (no local fallback). Ensure this GCS path exists and is accessible via ADC.
CORPUS_URI=gs://biomind-lab-data-trusty/biomind/corpus/corpus.jsonl

# Use BigQuery as corpus backend (id -> text/source/url)
# When set to 'bq' or 'bigquery', the server will read corpus entries from BigQuery instead of GCS JSONL
CORPUS_BACKEND=bq
# Point to your BigQuery dataset and table containing columns: id STRING, text STRING, source STRING, url STRING
BQ_CORPUS_DATASET=biomind_corpus
BQ_CORPUS_TABLE=corpus

# Hybrid Retrieval: Combine vector search with lexical/keyword search
HYBRID_RETRIEVAL=true
# BigQuery table for lexical search using SEARCH() function
BQ_CHUNKS_TABLE=corpus

# Ingestion targets for scripts (if set, CLI flags become optional)
# Provide a bucket and an object prefix/folder for datapoints & corpus artifacts
GCS_BUCKET=
GCS_PREFIX=biomind/corpus

# Application Default Credentials (set via gcloud auth)
# GOOGLE_APPLICATION_CREDENTIALS=$HOME/.config/gcloud/application_default_credentials.json

# User Uploads Persistence (GCP-only; no local storage)
# When true, uploaded files and their extracted texts are stored in GCS.
# Optionally, a copy of the extracted text is inserted into BigQuery.
PERSIST_UPLOADS=true
# Set to your bucket/prefix (must be gs://)
UPLOADS_BUCKET=gs://biomind-lab-data-trusty/biomind
# Optional BigQuery table to mirror extracted texts
# Example: DATASET=biomind_data, TABLE=uploads_texts
UPLOADS_BQ_DATASET=
UPLOADS_BQ_TABLE=
